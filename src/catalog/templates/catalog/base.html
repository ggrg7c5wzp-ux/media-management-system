<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Tuesday Saloon Catalog{% endblock %}</title>

    <!-- Bootstrap 5 (CDN) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
      @import url('https://fonts.googleapis.com/css2?family=IM+Fell+English:ital@0;1&family=Inter:wght@400;600;700&display=swap');

      :root{
        --ts-bg: #0f0b08;
        --ts-panel: #16100c;
        --ts-panel-2: #1d1510;
        --ts-border: rgba(255, 216, 158, 0.14);
        --ts-text: rgba(255, 238, 209, 0.92);
        --ts-muted: rgba(255, 238, 209, 0.66);
        --ts-accent: #d7a44a;
        --ts-accent-2: #b8743b;
        --ts-link: #e7c06a;
        --ts-link-hover: #ffd98a;
        --ts-shadow: 0 10px 30px rgba(0,0,0,.45);
      }

      body {
        background:
          radial-gradient(1200px 600px at 15% 0%, rgba(215,164,74,0.12), transparent 55%),
          radial-gradient(900px 500px at 85% 10%, rgba(184,116,59,0.10), transparent 60%),
          linear-gradient(180deg, #0b0705 0%, var(--ts-bg) 40%, #0b0705 100%);
        color: var(--ts-text);
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      }

      h1, h2, h3, .ts-brand {
        font-family: "IM Fell English", Georgia, serif;
        letter-spacing: 0.2px;
      }

      a { color: var(--ts-link); text-decoration: none; }
      a:hover { color: var(--ts-link-hover); text-decoration: underline; }

      /* Top bar */
      .ts-topbar {
        background: linear-gradient(180deg, rgba(22,16,12,0.92) 0%, rgba(15,11,8,0.85) 100%);
        border-bottom: 1px solid var(--ts-border);
        box-shadow: var(--ts-shadow);
        backdrop-filter: blur(6px);
      }

      /* App shell */
      .ts-shell {
        max-width: 1500px;
        margin: 0 auto;
        padding: 18px 16px 28px;
      }

      /* Sidebar + wood grain */
      .ts-sidebar {
        border: 1px solid var(--ts-border);
        box-shadow: var(--ts-shadow);
        border-radius: 14px;
        overflow: hidden;

        /* "wood grain" without assets */
        background:
          linear-gradient(180deg, rgba(0,0,0,0.18), rgba(0,0,0,0.06)),
          repeating-linear-gradient(
            90deg,
            rgba(255,216,158,0.03) 0px,
            rgba(255,216,158,0.03) 3px,
            rgba(0,0,0,0.00) 6px,
            rgba(0,0,0,0.00) 11px
          ),
          linear-gradient(180deg, #1a120d 0%, #140e0a 55%, #1b130e 100%);
      }

      .ts-sidebar .section-title{
        padding: 12px 14px;
        font-size: 12px;
        letter-spacing: .12em;
        text-transform: uppercase;
        color: var(--ts-muted);
        border-top: 1px solid rgba(255,216,158,0.08);
        background: rgba(0,0,0,0.10);
      }

      .ts-nav a{
        display:flex;
        gap:10px;
        align-items:center;
        padding: 10px 14px;
        color: var(--ts-text);
        border-left: 3px solid transparent;
      }
      .ts-nav a:hover{
        background: rgba(215,164,74,0.06);
        text-decoration: none;
      }
      .ts-nav a.active{
        border-left-color: rgba(215,164,74,0.85);
        background: rgba(215,164,74,0.08);
      }
      .ts-nav .muted{
        color: var(--ts-muted);
        font-size: 13px;
      }

      .ts-content {
        background: linear-gradient(180deg, rgba(22,16,12,0.40) 0%, rgba(22,16,12,0.20) 100%);
        border: 1px solid rgba(255,216,158,0.08);
        box-shadow: var(--ts-shadow);
        border-radius: 14px;
        padding: 16px;
        min-height: 72vh;
      }

      /* Desktop collapse */
      .ts-sidebar-col { flex: 0 0 320px; max-width: 320px; }
      .ts-main-col { flex: 1 1 auto; max-width: 100%; }

      body.sidebar-collapsed .ts-sidebar-col { display: none !important; }
      body.sidebar-collapsed .ts-main-col { flex: 0 0 100% !important; max-width: 100% !important; }

      /* Tables */
      .table {
        --bs-table-bg: transparent;
        --bs-table-color: var(--ts-text);
        border-color: var(--ts-border);
      }
      .table thead th {
        position: sticky;
        top: 0;
        background: linear-gradient(180deg, rgba(22,16,12,0.98) 0%, rgba(22,16,12,0.92) 100%);
        border-bottom: 1px solid var(--ts-border);
        color: var(--ts-text);
        z-index: 2;
      }
      .table-hover tbody tr:hover { background: rgba(215,164,74,0.06); }


      /* Lists (avoid Bootstrap white cards) */
      .list-group-item{
        background: rgba(0,0,0,.10);
        border-color: rgba(255,216,158,0.10);
        color: var(--ts-text);
      }
      .list-group-item .mono{ color: var(--ts-muted); }
      .list-group-item-action:hover{
        background: rgba(215,164,74,0.06);
        color: var(--ts-text);
      }
      .list-group-item-action:focus{
        background: rgba(215,164,74,0.08);
        color: var(--ts-text);
      }

      /* Tag badges */
      .ts-tag{
        border: 1px solid rgba(255,216,158,.22);
        background: rgba(215,164,74,0.10);
        color: rgba(255,238,209,0.92);
      }

      .form-control, .form-select {
        background: rgba(10,7,5,0.65);
        border: 1px solid var(--ts-border);
        color: var(--ts-text);
      }
      .form-control::placeholder { color: rgba(255,238,209,0.45); }

      .btn-outline-secondary {
        color: var(--ts-text);
        border-color: rgba(215,164,74,0.35);
      }
      .btn-outline-secondary:hover {
        background: rgba(215,164,74,0.14);
        border-color: rgba(215,164,74,0.55);
        color: var(--ts-text);
      }

      .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; color: var(--ts-muted); }
      .truncate { max-width: 520px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }



      /* Clickable tiles (dashboard + cards) */
      a.ts-tile-link{ display:block; color: inherit; text-decoration:none; }
      a.ts-tile-link:hover{ text-decoration:none; }
      .ts-tile{
        border: 1px solid rgba(255,216,158,.12);
        background: rgba(0,0,0,.10);
        border-radius: 14px;
        transition: transform .12s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
      }
      .ts-tile-lg{ padding: 16px; }
      .ts-tile-sm{ padding: 12px; }
      a.ts-tile-link:hover .ts-tile{
        background: rgba(215,164,74,0.08);
        border-color: rgba(215,164,74,0.32);
        transform: translateY(-1px);
        box-shadow: 0 10px 28px rgba(0,0,0,.35);
      }
      a.ts-tile-link:focus-visible .ts-tile{
        outline: 2px solid rgba(231,192,106,.55);
        outline-offset: 2px;
      }
      /* Breadcrumb */
      .ts-breadcrumb{
        color: var(--ts-muted);
        font-size: 13px;
        margin-bottom: 10px;
      }
      .ts-breadcrumb a{ color: var(--ts-link); }

      /* Footer */
      .ts-footer{
        max-width: 1500px;
        margin: 0 auto;
        padding: 0 16px 20px;
        color: var(--ts-muted);
      }
      .ts-footer a { color: var(--ts-link); }
    

      /* Chunk 10 polish */
      .ts-brand-center{
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        z-index: 20;
        margin: 0;
        letter-spacing: .12em;
        text-shadow: 0 0 14px rgba(215,164,74,.45);
        padding: .25rem .5rem;
        background: linear-gradient(180deg, rgba(15,11,8,.25), rgba(15,11,8,0));
        border-radius: 999px;
        pointer-events: auto;
      }
      @media (min-width: 992px){
        .ts-brand-center{
          position: static;
          transform: none;
          background: none;
          padding: 0;
        }
      }
      .ts-nav-search{ z-index: 6; }

      .ts-badge{
        display: inline-flex;
        align-items: center;
        gap: .35rem;
        padding: .35rem .55rem;
        border-radius: 999px;
        background: rgba(29,21,16,.9);
        border: 1px solid var(--ts-border);
        color: var(--ts-text);
        box-shadow: 0 8px 20px rgba(0,0,0,.25);
      }
      .ts-muted{ color: var(--ts-muted) !important; }
     .ts-muted{ color: var(--ts-muted) !important; }

      /* Anti-white guardrails (Bootstrap overrides) */
      .list-group,
      .list-group-item,
      .card,
      .card-body,
      .bg-white,
      .bg-light,
      .text-bg-light {
        background-color: transparent !important;
      }

      .list-group-item {
        border-color: rgba(255,216,158,.12) !important;
        color: var(--ts-text) !important;
      }

      .page-link {
        background: rgba(10,7,5,0.55) !important;
        border: 1px solid var(--ts-border) !important;
        color: var(--ts-text) !important;
      }
      .page-link:hover {
        background: rgba(215,164,74,0.12) !important;
        border-color: rgba(215,164,74,0.35) !important;
        color: var(--ts-text) !important;
      }
      .page-item.disabled .page-link {
        background: rgba(10,7,5,0.35) !important;
        color: rgba(255,238,209,0.38) !important;
        border-color: rgba(255,216,158,0.10) !important;
      }
      .page-item.active .page-link {
        background: rgba(215,164,74,0.14) !important;
        border-color: rgba(215,164,74,0.45) !important;
        color: var(--ts-text) !important;
      }
      </style>
  </head>

  <body>
    <!-- Top bar -->
    
    <nav class="navbar ts-topbar">
      <div class="container-fluid position-relative d-flex align-items-center">
        <div class="d-flex align-items-center gap-2">
          <!-- mobile: open sidebar -->
          <button class="btn btn-outline-secondary d-lg-none" type="button"
                  data-bs-toggle="offcanvas" data-bs-target="#tsSidebar"
                  aria-controls="tsSidebar">
            â˜°
          </button>

          <!-- desktop: collapse sidebar -->
          <button id="tsSidebarToggle" class="btn btn-outline-secondary d-none d-lg-inline" type="button" title="Toggle sidebar">
            ğŸªµ
          </button>
        </div>

        <a class="navbar-brand ts-brand-center fw-semibold text-uppercase" style="color: rgba(255,238,209,0.96);"
           href="{% url 'catalog_public:dashboard' %}">
          Tuesday Saloon
        </a>

        <div class="ms-auto ts-nav-search">
          {% block nav_search %}
          <form class="d-none d-sm-flex" method="get" action="{% url 'catalog_public:catalog_list' %}">
            <input class="form-control me-2" name="q" value="{{ request.GET.q|default:'' }}" placeholder="Search title or artistâ€¦">
            <button class="btn btn-outline-secondary" type="submit">Search</button>
          </form>
          {% endblock %}
        </div>
      </div>
    </nav>


    <div class="ts-shell">
      <div class="row g-3">
        <!-- Sidebar desktop -->
        <aside class="col-lg-3 d-none d-lg-block ts-sidebar-col">
          <div class="ts-sidebar">
            {% with p=request.path %}
            <div class="section-title">Navigate</div>
            <nav class="ts-nav">
              <a class="{% if p|slice:':11' == '/dashboard/' or p == '/dashboard' %}active{% endif %}" href="{% url 'catalog_public:dashboard' %}">ğŸ§­ <span>Dashboard</span></a>
              <a class="{% if p|slice:':9' == '/artists/' or p == '/artists' %}active{% endif %}" href="{% url 'catalog_public:artist_list' %}">ğŸ¤ <span>Artists</span></a>
              <a class="{% if p|slice:':8' == '/catalog/' or p == '/catalog' or p|slice:':7' == '/items/' %}active{% endif %}" href="{% url 'catalog_public:catalog_list' %}">ğŸ“š <span>Media Items</span></a>
            </nav>

            <div class="section-title">Browse</div>
            <nav class="ts-nav">
              <a class="{% if p|slice:':8' == '/genres/' or p == '/genres' %}active{% endif %}" href="{% url 'catalog_public:genre_list' %}">ğŸ›ï¸ <span>Genre</span></a>
              <a class="{% if p|slice:':12' == '/media-types/' or p == '/media-types' %}active{% endif %}" href="{% url 'catalog_public:media_type_list' %}">ğŸ’¿ <span>Media Types</span></a>
              <a class="{% if p|slice:':6' == '/tags/' or p == '/tags' %}active{% endif %}" href="{% url 'catalog_public:tag_list' %}">ğŸ·ï¸ <span>Tags</span></a>
            </nav>

            <div class="section-title">Curated</div>
            <nav class="ts-nav">
              <a class="{% if p|slice:':16' == '/curated/cander/' or p == '/curated/cander' %}active{% endif %}" href="{% url 'catalog_public:curated_cander' %}">ğŸª“ <span>Canderâ€™s Picks</span></a>
              <a class="{% if p|slice:':17' == '/curated/darvina/' or p == '/curated/darvina' %}active{% endif %}" href="{% url 'catalog_public:curated_darvina' %}">ğŸ˜ˆ <span>Darvinaâ€™s Picks</span></a>
              <a class="{% if p|slice:':20' == '/curated/audiophile/' or p == '/curated/audiophile' %}active{% endif %}" href="{% url 'catalog_public:curated_audiophile' %}">ğŸ§ <span>Audiophile</span></a>
            </nav>

            {% if request.user.is_authenticated and request.user.is_staff %}
              <div class="section-title">Staff</div>
              <nav class="ts-nav">
                <a class="{% if p|slice:':9' == '/reports/' or p|slice:':8' == '/reports' %}active{% endif %}" href="{% url 'catalog_public:reports_index' %}">ğŸ§¾ <span>Reports</span></a>
              </nav>
            {% endif %}
          </div>

            {% endwith %}        </aside>

        <!-- Sidebar mobile (offcanvas) -->
        <div class="offcanvas offcanvas-start d-lg-none" tabindex="-1" id="tsSidebar">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title ts-brand">Tuesday Saloon</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
          </div>
          <div class="offcanvas-body">
            <div class="ts-sidebar">
              {% with p=request.path %}
              <div class="section-title">Navigate</div>
              <nav class="ts-nav">
                <a class="{% if p|slice:':11' == '/dashboard/' or p == '/dashboard' %}active{% endif %}" href="{% url 'catalog_public:dashboard' %}">ğŸ§­ <span>Dashboard</span></a>
                <a class="{% if p|slice:':9' == '/artists/' or p == '/artists' %}active{% endif %}" href="{% url 'catalog_public:artist_list' %}">ğŸ¤ <span>Artists</span></a>
                <a class="{% if p|slice:':8' == '/catalog/' or p == '/catalog' or p|slice:':7' == '/items/' %}active{% endif %}" href="{% url 'catalog_public:catalog_list' %}">ğŸ“š <span>Media Items</span></a>
              </nav>

              <div class="section-title">Browse</div>
              <nav class="ts-nav">
                <a class="{% if p|slice:':8' == '/genres/' or p == '/genres' %}active{% endif %}" href="{% url 'catalog_public:genre_list' %}">ğŸ›ï¸ <span>Genre</span></a>
                <a class="{% if p|slice:':12' == '/media-types/' or p == '/media-types' %}active{% endif %}" href="{% url 'catalog_public:media_type_list' %}">ğŸ’¿ <span>Media Types</span></a>
                <a class="{% if p|slice:':6' == '/tags/' or p == '/tags' %}active{% endif %}" href="{% url 'catalog_public:tag_list' %}">ğŸ·ï¸ <span>Tags</span></a>
              </nav>

              <div class="section-title">Curated</div>
              <nav class="ts-nav">
                <a class="{% if p|slice:':16' == '/curated/cander/' or p == '/curated/cander' %}active{% endif %}" href="{% url 'catalog_public:curated_cander' %}">ğŸª“ <span>Canderâ€™s Picks</span></a>
                <a class="{% if p|slice:':17' == '/curated/darvina/' or p == '/curated/darvina' %}active{% endif %}" href="{% url 'catalog_public:curated_darvina' %}">ğŸ˜ˆ <span>Darvinaâ€™s Picks</span></a>
                <a class="{% if p|slice:':20' == '/curated/audiophile/' or p == '/curated/audiophile' %}active{% endif %}" href="{% url 'catalog_public:curated_audiophile' %}">ğŸ§ <span>Audiophile</span></a>
              </nav>

              {% if request.user.is_authenticated and request.user.is_staff %}
                <div class="section-title">Staff</div>
                <nav class="ts-nav">
                  <a class="{% if p|slice:':9' == '/reports/' or p|slice:':8' == '/reports' %}active{% endif %}" href="{% url 'catalog_public:reports_index' %}">ğŸ§¾ <span>Reports</span></a>
                </nav>
              {% endif %}
            </div>
          </div>
        </div>


              {% endwith %}
        <!-- Main content -->
        <section class="col-lg-9 ts-main-col">
          <div class="ts-content">
            {% block breadcrumb %}{% endblock %}
            {% block content %}{% endblock %}
          </div>
        </section>
      </div>
    </div>

    <footer class="ts-footer">
      <div class="d-flex justify-content-between align-items-center flex-wrap gap-2 pt-2"
           style="border-top:1px solid rgba(255,216,158,0.10);">
        <div>
          <a href="https://www.linkedin.com/search/results/all/?keywords=Michael%20Rapino%20CISM%20CDPSE" target="_blank" rel="noopener">ğŸª“ Meet Cander</a>
        </div>

        <div class="text-center flex-grow-1">
          Â© {% now "Y" %} Tuesday Saloon
        </div>

        <div>
          <a href="https://www.linkedin.com/search/results/all/?keywords=Julie%20Rapino%20M.%20Ed.%20LBS" target="_blank" rel="noopener">ğŸ˜ˆ Meet Darvina</a>
        </div>
      </div>
    </footer>

    <!-- Bootstrap JS (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Desktop sidebar collapse, persisted
      (function(){
        const key = "ts_sidebar_collapsed_v1";
        const apply = (collapsed) => {
          document.body.classList.toggle("sidebar-collapsed", collapsed);
        };
        try {
          const saved = localStorage.getItem(key);
          if (saved === "1") apply(true);
        } catch (e) {}

        const btn = document.getElementById("tsSidebarToggle");
        if (btn){
          btn.addEventListener("click", () => {
            const collapsed = !document.body.classList.contains("sidebar-collapsed");
            apply(collapsed);
            try { localStorage.setItem(key, collapsed ? "1" : "0"); } catch (e) {}
          });
        }
      })();
    </script>
  </body>
</html>
