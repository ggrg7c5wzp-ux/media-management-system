{% extends "catalog/base.html" %}
{% block title %}{{ item.title }}{% endblock %}

{% block content %}
<div class="d-flex align-items-start justify-content-between gap-3">
  <!-- LEFT: Item identity -->
  <div class="flex-grow-1">
    <h1 class="h3 m-0">{{ item.title }}</h1>

    <div class="ts-muted mt-1">
      <a href="{% url 'catalog_public:artist_detail' item.artist.id %}" class="fw-semibold">
        {{ item.artist.display_name }}
      </a>
      <span class="mx-2">‚Ä¢</span>
      <span class="mono">{{ item.artist.sort_name }}</span>
    </div>

    <div class="d-flex flex-wrap gap-2 mt-2">
      {% if item.bucket %}
        <span class="ts-badge">Genre <span class="mono">{{ item.bucket.code }}</span></span>
      {% endif %}
      {% if item.effective_zone %}
        <span class="ts-badge">Location <span class="mono">{{ item.effective_zone.code }}</span></span>
      {% endif %}
      {% if item.physical_bin %}
        <span class="ts-badge">Bin <span class="mono">{{ item.physical_bin.shelf_number }}-{{ item.physical_bin.bin_number }}</span></span>
      {% elif item.logical_bin %}
        <span class="ts-badge">Bin <span class="mono">{{ item.logical_bin.code }}</span></span>
      {% endif %}
    </div>

    {% if item_tags %}
      <div class="d-flex flex-wrap gap-2 mt-2">
        {% for t in item_tags %}
          <a class="ts-badge ts-tag text-decoration-none" href="{% url 'catalog_public:tag_detail' t.pk %}">üè∑Ô∏è {{ t.name }}
          </a>
        {% endfor %}
      </div>
    {% endif %}
  </div>

  <!-- RIGHT: Navigation -->
  <div class="d-flex gap-2 flex-wrap justify-content-end" style="min-width: 260px;">
    <a class="btn btn-outline-secondary"
       href="{% url 'catalog_public:catalog_list' %}{{ back_query|default:'' }}">
      ‚Üê Media Items
    </a>

    {% if prev_id %}
      <a class="btn btn-outline-secondary"
         href="{% url 'catalog_public:item_detail' prev_id %}{{ back_query|default:'' }}">
        ‚Üê Prev
      </a>
    {% endif %}

    {% if next_id %}
      <a class="btn btn-outline-secondary"
         href="{% url 'catalog_public:item_detail' next_id %}{{ back_query|default:'' }}">
        Next ‚Üí
      </a>
    {% endif %}
  </div>
</div>

<hr style="border-color: rgba(255,216,158,.14);">


<div class="row g-3">
  <div class="col-12 col-lg-6">
    <div class="p-3 rounded-3" style="border:1px solid rgba(255,216,158,.12); background:rgba(0,0,0,.08);">
      <div class="ts-brand" style="font-size:18px;">Where It Lives</div>

      <div class="mt-2">
        <div class="ts-muted">Effective Zone</div>
        <div class="mono" style="font-size:16px;">
          {% if effective_zone %}
            {{ effective_zone.code }} ‚Äî {{ effective_zone.name }}
          {% else %}
            ‚Äî
          {% endif %}
        </div>

        <div class="mt-3 d-flex flex-wrap gap-3">
          <div>
            <div class="ts-muted">Default Zone</div>
            <div class="mono">
              {% if default_zone %}
                {{ default_zone.code }} ‚Äî {{ default_zone.name }}
              {% else %}
                ‚Äî
              {% endif %}
            </div>
          </div>

          <div>
            <div class="ts-muted">Override</div>
            <div class="mono">
              {% if override_zone %}
                {{ override_zone.code }} ‚Äî {{ override_zone.name }}
              {% else %}
                ‚Äî
              {% endif %}
            </div>
          </div>
        </div>

        {% if item.physical_bin %}
          <div class="mt-3">
            <div class="ts-muted">Physical Bin</div>
            <div class="mono">Shelf {{ item.physical_bin.shelf_number }} Bin {{ item.physical_bin.bin_number }}</div>
          </div>
        {% endif %}

        {% if item.logical_bin %}
          <div class="mt-3">
            <div class="ts-muted">Logical Bin</div>
            <div class="mono">{{ item.logical_bin.code }}</div>
          </div>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="col-12 col-lg-6">
    <div class="p-3 rounded-3" style="border:1px solid rgba(255,216,158,.12); background:rgba(0,0,0,.08);">
      <div class="ts-brand" style="font-size:18px;">Details</div>

      <div class="mt-2">
        <div class="d-flex justify-content-between py-1">
          <div class="ts-muted">Master Key</div>
          <div class="mono">{{ item.master_key }}</div>
        </div>

        <div class="d-flex justify-content-between py-1">
          <div class="ts-muted">Media</div>
          <div class="mono">{{ item.media_type.name }}</div>
        </div>

        <div class="d-flex justify-content-between py-1">
          <div class="ts-muted">Pressing Year</div>
          <div class="mono">{% if item.pressing_year %}{{ item.pressing_year }}{% else %}‚Äî{% endif %}</div>
        </div>

        {% if item.release_year %}
          <div class="d-flex justify-content-between py-1">
            <div class="ts-muted">Release Year</div>
            <div class="mono">{{ item.release_year }}</div>
          </div>
        {% endif %}

        {% if item.speed %}
          <div class="d-flex justify-content-between py-1">
            <div class="ts-muted">Speed</div>
            <div class="mono">{{ item.speed }}</div>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
